<VirtualHost *:80>
  ServerName localhost
  ServerAdmin webmaster@localhost

  # Désactiver ModSecurity pour Adminer
  <Location /adminer>
    SecRuleEngine Off
  </Location>

  <Location /accounts>
    SecRuleEngine Off
  </Location>

  # Redirection vers Adminer
  ProxyPass "/adminer" "http://adminer:8080/"
  ProxyPassReverse "/adminer" "http://adminer:8080/"

  ProxyPreserveHost On
  ProxyPass "/accounts" "http://web:8000/accounts"
  ProxyPassReverse "/accounts" "http://web:8000/accounts"

  # Configuration pour le front-end statique (HTML, CSS, JS) dans /app
  DocumentRoot "/app"
  <Directory "/app">
    Options Indexes FollowSymLinks
    AllowOverride All
    Require all granted
  </Directory>

  # # Redirection pour Django backend, uniquement si les fichiers ne sont pas trouvés dans /app
  # <Location /backend>
  #   ProxyPreserveHost On
  #   ProxyPass "http://web:8000/"
  #   ProxyPassReverse "http://web:8000/"
  # </Location>

  # Logs
  ErrorLog ${APACHE_LOG_DIR}/error.log
  CustomLog ${APACHE_LOG_DIR}/access.log combined

</VirtualHost>
